

/* ===========================
   WORKSTATION â€“ FULL CSS
   =========================== */

/* ---------- Page shell & background ---------- */
.ws-page{
  display:flex; gap:0;
  min-height:100vh;
  background:linear-gradient(180deg,#0f1115,#161920);
  overflow-x: hidden;                 /* prevent horizontal scrollbar */
  scrollbar-width: none;              /* Firefox hide page bar */
}
.ws-page::-webkit-scrollbar{
  width:0 !important; height:0 !important;  /* WebKit hide page bar */
}
[data-theme='light'] .ws-page{
  background:linear-gradient(180deg,#f6f7fb,#eceff4);
}

/* ---------- Sidebar ---------- */
.ws-sidebar{
  position: fixed;
  inset: 0 auto 0 0; 
  height: 100dvh;
  width: 86px; 
  overflow-y: auto;                                 /* compact width */
  background: linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.35));
  border-right:1px solid rgba(255,255,255,.08);
  backdrop-filter: blur(8px);
  display:flex; flex-direction:column;
  z-index:30; transition:width .28s ease;
  
}
[data-theme='dark'] .ws-sidebar{
  background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.18));
  border-right: 1px solid rgba(255,255,255,.08);
}

.ws-sidebar{
  
  overflow-x: hidden;
  overscroll-behavior: contain;
  padding-bottom: 16px;
  scrollbar-width: thin;  /* Firefox */
  scrollbar-color: rgba(255,255,255,.35) transparent;
}




/* Sidebar agent avatar - make icon visible in light mode */
[data-theme="light"] .ws-agent-pill .ico.avatar{
  color: #2b3343; /* dark stroke so the glyph shows */
  background: linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.03));
  border-color: rgba(0,0,0,.10);
  box-shadow: 0 6px 12px rgba(0,0,0,.08);
}

.ws-sidebar.expanded{ width:256px; }           /* expanded width */

.ws-side-top{ display:flex; align-items:center; justify-content:space-between; padding:12px 10px 10px; }
.ws-brand{ display:flex; align-items:center; gap:10px; }
.ws-brand .logo{ width:36px; height:36px; display:grid; place-items:center; border-radius:10px; background:var(--bg-accent); }
.ws-brand .brand-text{ font-weight:800; letter-spacing:.2px; }

.ws-toggle-exp{ border:none; border-radius:10px; padding:8px 10px; cursor:pointer; background:var(--bg-accent); color:var(--text); }

.ws-side-section{ padding:8px; }
.ws-sec-title{ font-size:12px; opacity:.72; margin:4px 0 6px; padding-left:6px; }

.ws-agent-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:6px; }
.ws-agent-pill{
  position:relative; display:flex; align-items:center; gap:10px;
  padding:10px; border-radius:12px; color:var(--text);
  background:transparent; cursor:pointer;
  transition: background .2s ease, transform .2s ease, opacity .2s ease;
}
.ws-agent-pill:hover{ background:var(--bg-accent); transform:translateY(-1px); }
.ws-agent-pill.disabled{ opacity:.45; pointer-events:none; }

/* Round, visible icon in sidebar */
.ws-agent-pill .ico.avatar{
  width:34px; height:34px; border-radius:999px; display:grid; place-items:center;
  color:#fff;
  background:linear-gradient(180deg,rgba(255,255,255,.25),rgba(255,255,255,.1));
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 6px 16px rgba(0,0,0,.25);
}

.ws-row-btn, .ws-row-btn:link, .ws-row-btn:visited{
  display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text);
  padding:10px; border-radius:10px; background:transparent; transition:background .2s ease;
}
.ws-row-btn:hover{ background:var(--bg-accent); }
.ws-row-btn .ico{ width:22px; display:inline-grid; place-items:center; }
.ws-side-spacer{ flex:1; }

/* Sidebar tooltip */
/* Default: show BELOW the hovered pill */
.ws-tooltip{
  position: absolute;
  left: 100%;
  top: calc(100% + 8px);
  transform: translate(12px, 0);
  width: 320px;
  max-height: 60vh;           /* readable even for long bios */
  overflow: auto;
  padding: 12px;
  border-radius: 14px;
  z-index: 80;
  background: rgba(15,18,24,.92);
  color: #e9edf7;
  border: 1px solid rgba(255,255,255,.16);
  box-shadow: 0 18px 40px rgba(0,0,0,.45);
  backdrop-filter: saturate(120%) blur(6px);
  line-height: 1.45;
}
[data-theme='light'] .ws-tooltip{
  background: rgba(255,255,255,.96);
  color:#12151d;
  border-color: rgba(0,0,0,.12);
}

/* When near the bottom: flip ABOVE the pill */
.ws-tooltip.flip{
  top: auto;                        /* unset below placement */
  bottom: calc(100% + 8px);         /* place above */
  transform: translate(12px, 0);    /* same horizontal offset */
}


/* ---------- Main area ---------- */
.ws-main{ flex:1 1 auto; min-width:0; padding:18px 16px 80px; margin-left: 86px;}
.ws-sidebar.expanded ~ .ws-main{ margin-left: 256px; }
.ws-header{ display:flex; align-items:center; justify-content:space-between; margin:8px 0 12px; }
.ws-head-actions{ display:flex; align-items:center; gap:10px; }
.ws-count{ opacity:.78; font-size:12px; }

/* ---------- Bordered board wrapper (holds up to 5 agents) ---------- */
.ws-board{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px; padding:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.20);
}
[data-theme='light'] .ws-board{
  background:rgba(255,255,255,.7);
  border:1px solid rgba(0,0,0,.08);
}
.ws-board-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }

/* ---------- Grid & cards ---------- */
.ws-grid{ display:grid; grid-template-columns:repeat(4,minmax(220px,1fr)); gap:14px; }
@media (max-width:1200px){ .ws-grid{ grid-template-columns:repeat(3,1fr); } }
@media (max-width:920px){  .ws-grid{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:620px){  .ws-grid{ grid-template-columns:1fr; } }

.ws-card{
  background:var(--card); border-radius:16px; padding:14px; box-shadow:var(--shadow);
  border:1px solid rgba(0,0,0,.06); transition:transform .25s ease, box-shadow .25s ease;
}
[data-theme='dark'] .ws-card{
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.05));
  border-color:rgba(255,255,255,.12);
}
.ws-card:hover{ transform:translateY(-4px); box-shadow:0 16px 28px rgba(0,0,0,.16); }

.ws-card.agent{ display:flex; flex-direction:column; gap:8px; }
.ws-agent-head{ display:flex; align-items:center; gap:10px; }

/* Card avatar (for main board) */
.ws-avatar{
  width:44px; height:44px; border-radius:999px; display:grid; place-items:center; color:#fff;
  background:linear-gradient(135deg,#6ff,#a7f);
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 6px 18px rgba(0,0,0,.18);
}

.ws-agent-title{ display:flex; flex-direction:column; gap:3px; }
.ws-name{ font-weight:800; }
.ws-tag{ font-size:12px; padding:2px 8px; border-radius:999px; background:var(--bg-accent); width:max-content; }

.ws-icon-btn{ margin-left:auto; border:none; background:var(--bg-accent); color:var(--text); border-radius:10px; padding:8px 10px; cursor:pointer; }
.ws-icon-btn.ghost{ background:transparent; }
.ws-icon-btn:hover{ filter:brightness(1.05); }

.ws-kv{ display:grid; gap:8px; }
.ws-k{ font-size:12px; opacity:.75; margin-bottom:2px; }
.ws-v{ background:var(--bg-accent); border-radius:10px; padding:8px 10px; }

/* Empty state */
.ws-empty{ grid-column:1/-1; text-align:center; opacity:.9; padding:24px; border:1px dashed rgba(0,0,0,.15); border-radius:12px; }
[data-theme='dark'] .ws-empty{ border-color:rgba(255,255,255,.18); }

/* Buttons */
.ws-btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 14px; border-radius:12px; border:1px solid rgba(0,0,0,.06);
  background:var(--bg-accent); color:var(--text); cursor:pointer;
  transition:transform .25s ease, box-shadow .25s ease, background-position .5s ease;
}
.ws-btn:hover{ transform:translateY(-1px); box-shadow:0 10px 18px rgba(0,0,0,.12); }
.ws-btn.primary{
  background:linear-gradient(90deg,var(--cyan),var(--violet),var(--pink));
  color:#fff; border:none; background-size:200% 100%; background-position:0% 50%;
}
.ws-btn.primary:hover{ background-position:100% 50%; }
.ws-btn:disabled{ opacity:.55; cursor:not-allowed; }

/* Sticky next */
.ws-next{ position:sticky; bottom:12px; display:flex; justify-content:flex-end; margin-top:10px; }

/* ---------- Modal (opaque, readable) ---------- */
.ws-modal-backdrop{
  position:fixed; inset:0; z-index:60; background:rgba(0,0,0,.55); backdrop-filter: blur(2px);
  display:grid; place-items:center;
}
/* Widen modal so fields aren't cramped */
.ws-modal{ width:min(900px,96vw); max-height:86vh; overflow:auto; animation:ws-rise .28s ease both; }
@keyframes ws-rise{ from{ transform:translateY(12px); opacity:0 } to{ transform:none; opacity:1 } }

/* Solid surface to block background noise */
.ws-modal-solid{
  background:linear-gradient(180deg,rgba(20,22,28,.98),rgba(20,22,28,.96)) !important;
  border-color:rgba(255,255,255,.12) !important;
}
[data-theme='light'] .ws-modal-solid{
  background:#fff !important;
  border-color:rgba(0,0,0,.08) !important;
}

.ws-form{ display:grid; gap:12px; margin-top:8px; }
.ws-form label{ display:grid; gap:6px; font-size:13px; }
.ws-form input, .ws-form textarea, .ws-form select{
  border-radius:12px; border:1px solid rgba(0,0,0,.08);
  background:rgba(255,255,255,.96); color:var(--text); padding:10px 12px;
}
[data-theme='dark'] .ws-form input,
[data-theme='dark'] .ws-form textarea,
[data-theme='dark'] .ws-form select{
  background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.14); color:#f3f6fe;
}
.ws-modal-actions{ display:flex; justify-content:flex-end; gap:10px; margin-top:6px; }

/* ---------- Pretty select (baseline styles remain for other selects) ---------- */
.ws-select{
  position: relative;
  display: grid;
  grid-template-columns: 1fr;
  gap: 6px;
}
.ws-select > span{ font-size:13px; opacity:.86; }

/* Native select (kept for any other usage) */
.ws-select > select{
  -webkit-appearance:none; appearance:none; width:100%;
  height:36px; padding:6px 32px 6px 12px; border-radius:10px;
  background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.14);
  color:#e9edf7; color-scheme:dark; line-height:1.2; font:inherit;
  transition: border-color .18s ease, box-shadow .18s ease;
  scrollbar-width:none;
  -moz-appearance: none;
  appearance: none;
  background-image: none !important; /* belt-and-suspenders for Chrome/Edge */
}
.ws-select > select::-webkit-scrollbar{ width:0; height:0; }
[data-theme='light'] .ws-select > select{
  background:#eef1f7; border-color:rgba(0,0,0,.10); color:#12151d; color-scheme:light;
}
.ws-select > select:hover{ border-color:rgba(255,255,255,.22); }
[data-theme='light'] .ws-select > select:hover{ border-color:rgba(0,0,0,.20); }
.ws-select > select:focus{
  outline:none; border-color:#7A5CF4; box-shadow:0 0 0 6px rgba(122,92,244,.18);
}
.ws-select > select:disabled{ opacity:.6; cursor:not-allowed; }

/* Chevron for baseline select */
.ws-select::after{
  content:''; position:absolute; right:10px; top:calc(50% + 8px);
  width:8px; height:8px; border-right:2px solid currentColor; border-bottom:2px solid currentColor;
  transform:translateY(-50%) rotate(45deg); opacity:.65; pointer-events:none; color:#b9c3d9;
}
[data-theme='light'] .ws-select::after{ color:#495266; }
.ws-select:focus-within::after{ transform:translateY(-50%) rotate(225deg); opacity:.92; }

/* ---------- Layout width clamp fixes ---------- */
.ws-form .ws-select,
.ws-form label,
.ws-form .field{
  max-width:820px;         /* wider cap so inputs breathe */
  width:100%;
  margin-inline:0;
}
.ws-form input,
.ws-form textarea,
.ws-form select{ width:100%; }

/* ======================
   Custom dropdown (MBTI)
   ====================== */
.ws-select--custom{ position:relative; }
.ws-select--custom .ws-dd-trigger{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  width:100%; height:36px; padding:6px 10px 6px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.10);
  color:#e9edf7; font:inherit; line-height:1.2;
}
[data-theme="light"] .ws-select--custom .ws-dd-trigger{
  background:#eef1f7; color:#12151d; border-color:rgba(0,0,0,.10);
}
.ws-select--custom .ws-dd-trigger:focus{
  outline:none; border-color:#7A5CF4; box-shadow:0 0 0 6px rgba(122,92,244,.18);
}
.ws-select--custom .ws-dd-trigger .chev{ opacity:.75; transition:transform .2s ease; }

/* Dropdown panel: DARK, ROUNDED, max-height */
.ws-select--custom .ws-dd{
  position:absolute; left:0; right:0; top:calc(100% + 8px);
  z-index:90;
  max-height:320px;
  overflow:auto;
  background:#0f1218;                 /* fully dark, no white edge */
  color:#e9edf7;
  border:1px solid rgba(255,255,255,.10);
  border-radius:14px;
  box-shadow:0 18px 40px rgba(0,0,0,.45);
  padding:6px;
}
@media (pointer:fine){
  .ws-select--custom .ws-dd{ max-height:min(320px,60vh); }
}
.ws-select--custom .ws-dd::-webkit-scrollbar{ width:10px; }
.ws-select--custom .ws-dd::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.18); border-radius:999px;
}

/* Options */
.ws-select--custom .ws-dd-opt{
  list-style:none; padding:10px 12px; border-radius:10px; cursor:pointer;
}
.ws-select--custom .ws-dd-opt:hover,
.ws-select--custom .ws-dd-opt.is-focus{ background:rgba(255,255,255,.08); }
.ws-select--custom .ws-dd-opt.is-active{ background:rgba(122,92,244,.35); }

/* Keep modal scrollbars hidden but allow scroll */
.ws-modal{ scrollbar-width:none; }
.ws-modal::-webkit-scrollbar{ display:none; }

/* Compact field heights */
.ws-form textarea{ min-height:80px; }
.ws-form input{ height:36px; }

.ws-select--custom::after { display: none !important; }

/* Fixed-size textareas inside the Add/Edit modal */
.ws-modal .ws-form textarea{
  height: 110px;      /* pick your exact height */
  min-height: 110px;  /* lock min */
  max-height: 110px;  /* lock max */
  resize: none;       /* disable user drag-resize */
  overflow: auto;     /* scroll when content exceeds */
}

/* =========================
   Responsive Sidebar Theme Switch
   ========================= */

/* Base sizes via CSS variables */
.ws-theme-switch{
  /* track sizing (expanded) */
  --w: 96px;          /* width */
  --h: 32px;          /* height */
  --pad: 4px;         /* inner padding / inset */
  --knob: 24px;       /* knob size */
  position: relative;
  display: inline-block;
  width: var(--w);
  height: var(--h);
  max-width: 100%;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.22);
  background: linear-gradient(180deg, #ffeab7, #e3f0ff);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.7),
    0 6px 18px rgba(0,0,0,.25);
  cursor: pointer;
  transition: background .25s ease, border-color .25s ease, box-shadow .25s ease;
  outline: none;
  margin-bottom: 12px; /* gives a little space above "History" */
}

/* Dark track */
[data-theme="dark"] .ws-theme-switch{
  border-color: rgba(255,255,255,.14);
  background: linear-gradient(180deg, #1b2230, #0f1725);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 10px 22px rgba(0,0,0,.35);
}

/* Focus ring */
.ws-theme-switch:focus-visible{
  box-shadow:
    0 0 0 6px rgba(122,92,244,.22),
    inset 0 1px 0 rgba(255,255,255,.08);
  border-color: #7A5CF4;
}

/* Knob â€” positions compute from variables, so it scales with width/height */
.ws-theme-switch::after{
  content: "";
  position: absolute;
  top: var(--pad);
  left: calc(100% - (var(--knob) + var(--pad)));  /* LIGHT: right end */
  width: var(--knob);
  height: var(--knob);
  border-radius: 999px;
  background: #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,.35);
  transition: left .25s ease;
}
.ws-theme-switch.dark::after{
  left: var(--pad);                                    /* DARK: left end */
}

/* Icon inside the track, always opposite the knob */
.ws-theme-switch::before{
  content: "☀️";                                       /* LIGHT: sun on left */
  position: absolute;
  left: calc(var(--pad) + 8px);
  top: 50%;
  transform: translateY(-50%);
  font-size: calc(var(--knob) - 6px);
  line-height: 1;
  pointer-events: none;
}
.ws-theme-switch.dark::before{
  content: "🌙";
  left: auto;
  right: calc(var(--pad) + 8px);                       /* DARK: moon on right */
}

/* ===== Compact size when sidebar is collapsed ===== */
.ws-sidebar:not(.expanded) .ws-theme-switch{
  --w: 58px;      /* narrower pill to fit the 86px sidebar */
  --h: 28px;
  --pad: 4px;
  --knob: 20px;
}

/* 1) Ensure the sidebar/tooltip stack above main */
.ws-page{ position: relative; }                 /* create root context */
.ws-main{ position: relative; z-index: 1; }     /* keep main below tooltip */
.ws-sidebar{ z-index: 1000; }                   /* lift whole sidebar */

/* 2) Make sure the last sidebar rule keeps horizontal overflow open */
.ws-sidebar{ overflow-x: visible; }             /* avoid clipping the tooltip */

/* 3) Keep your â€œbelowâ€ placement, but guarantee it paints on top */
.ws-tooltip{ z-index: 1001; }                   /* over .ws-main */

/* Optional: if some GPUs still mask the panel under heavy blur */
.ws-tooltip{ backdrop-filter: blur(4px) saturate(120%); }

/* --- Sidebar: stop clipping tooltips --- */